// ArkTSç±»å‹å’Œè£…é¥°å™¨ä¿®æ­£ç‰ˆ

// å¿«æ·å…¥å£ç±»
class QuickAction {
  icon: string;
  label: string;
  bgColor: string;
  constructor(icon: string, label: string, bgColor: string) {
    this.icon = icon;
    this.label = label;
    this.bgColor = bgColor;
  }
}
// æ¶ˆæ¯ç±»
class MessageItem {
  avatar: Resource;
  name: string;
  desc: string;
  time: string;
  followed: boolean;
  unread: number;
  isOfficial?: boolean;
  isSystem?: boolean;
  constructor(
    avatar: Resource,
    name: string,
    desc: string,
    time: string,
    followed: boolean,
    unread: number,
    isOfficial?: boolean,
    isSystem?: boolean
  ) {
    this.avatar = avatar;
    this.name = name;
    this.desc = desc;
    this.time = time;
    this.followed = followed;
    this.unread = unread;
    this.isOfficial = isOfficial;
    this.isSystem = isSystem;
  }
}

@Entry
@Component
export struct MessagePage {
  // å¿«æ·å…¥å£æ•°æ®
  private quickActions: QuickAction[] = [
    new QuickAction('ğŸ‘ï¸', 'è¿æ¥&å…³æ³¨', '#1DE9B6'),
    new QuickAction('â¤ï¸', 'æ–°çš„ç‚¹èµ', '#FF4081'),
    new QuickAction('ğŸ‘¥', 'æ–°çš„è®¢é˜…', '#FFB300'),
    new QuickAction('ğŸ’¬', 'æ–°çš„è¯„è®º', '#00B8D4'),
  ];

  // æ¶ˆæ¯åˆ—è¡¨æ¨¡æ‹Ÿæ•°æ®
  private messages: MessageItem[] = [
    new MessageItem($r('app.media.splash'), 'è°¢åŒä¹‹', 'ï¼ˆèƒƒé‡Œä¸€é˜µç»ç—›ï¼Œé¢ä¸Šæ¸—å‡ºç»†æ±—ï¼Œå’¬ç€ç‰™è¯´é“ï¼‰...', 'æ˜ŸæœŸå››', true, 0),
    new MessageItem($r('app.media.splash'), 'èƒ½çŒœå‡ºä½ å¦/æ¨', '[ç³»ç»Ÿæ¶ˆæ¯]è§£é”"å¾®ç¬‘"æ—¶åˆ»ï¼Œå¯åœ¨è¯¦æƒ…æŸ¥çœ‹ å»æŸ¥çœ‹', 'æ˜ŸæœŸå››', false, 0),
    new MessageItem($r('app.media.splash'), 'æ˜Ÿè‹¥ï¼ˆAIåŠ©æ‰‹ï¼‰', 'æ ¹æ®æœç´¢ææ–™ï¼Œä»¥ä¸‹æ˜¯æ­¦æ±‰å¸‚2025å¹´6æœˆ27æ—¥çš„...', 'æ˜ŸæœŸå››', false, 0, true),
    new MessageItem($r('app.media.splash'), 'ç³»ç»Ÿé€šçŸ¥', 'ğŸ“»æ¬¢è¿æ–°äººä¸»æ’­ã€Œæ­¦åª›å¨˜ã€å…¥é©»æ˜Ÿé‡ï¼', 'æ˜ŸæœŸä¸€', false, 0, false, true),
  ];

  build() {
    Column() {
      // å››ä¸ªå¿«æ·å…¥å£
      Row() {
        ForEach(this.quickActions, (item: QuickAction, idx: number) => {
          Column() {
            Blank().height(8)
            // å›¾æ ‡
            Blank().height(8)
            Row() {
              Blank().width(8)
              // ç”¨Rowå’ŒalignItemså±…ä¸­
              Column() {
                Text(item.icon)
                  .fontSize(28)
                  .backgroundColor(item.bgColor)
                  .width(48)
                  .height(48)
                  .borderRadius(16)
                  .textAlign(TextAlign.Center)
                  .align(Alignment.Center)
              }
              Blank().width(8)
            }
            // æ ‡ç­¾
            Text(item.label)
              .fontSize(14)
              .fontColor('#fff')
              .margin({ top: 8 })
              .textAlign(TextAlign.Center)
          }
          .width('25%')
          .alignItems(HorizontalAlign.Center)
        }, (item: QuickAction) => item.label)
      }
      .width('100%')
      .backgroundColor('#181818')
      .padding({ top: 16, bottom: 16 })

      // æ¶ˆæ¯åˆ—è¡¨
      List() {
        ForEach(this.messages, (msg: MessageItem, idx: number) => {
          ListItem() {
            Row() {
              // å¤´åƒ
              Image(msg.avatar)
                .width(48)
                .height(48)
                .borderRadius(24)
                .margin({ left: 16, right: 12 })
              // ä¸»è¦å†…å®¹
              Column({ space: 4 }) {
                Row() {
                  Text(msg.name)
                    .fontSize(16)
                    .fontColor(msg.isOfficial ? '#0D9FFB' : (msg.isSystem ? '#1976D2' : '#fff'))
                    .fontWeight(FontWeight.Bold)
                  if (msg.followed) {
                    Text('å·²å…³æ³¨')
                      .fontSize(12)
                      .fontColor('#888')
                      .margin({ left: 8 })
                  }
                  if (msg.isOfficial) {
                    Text('å®˜æ–¹åŠ©æ‰‹')
                      .fontSize(12)
                      .fontColor('#0D9FFB')
                      .backgroundColor('#222')
                      .margin({ left: 8 })
                      .borderRadius(6)
                      .padding({ left: 4, right: 4 })
                  }
                }
                Text(msg.desc)
                  .fontSize(13)
                  .fontColor('#bbb')
                  .maxLines(1)
                  .margin({ top: 2 })
              }
              .layoutWeight(1)
              // æ—¶é—´
              Column() {
                Text(msg.time)
                  .fontSize(12)
                  .fontColor('#888')
                  .margin({ bottom: 8 })
                if (msg.unread > 0) {
                  // æœªè¯»è§’æ ‡
                  Text(msg.unread.toString())
                    .fontSize(10)
                    .fontColor('#fff')
                    .backgroundColor('#FF5252')
                    .borderRadius(8)
                    .width(16)
                    .height(16)
                    .textAlign(TextAlign.Center)
                }
              }
              .alignItems(HorizontalAlign.End)
              .margin({ right: 16 })
            }
            .height(64)
            .backgroundColor('#222')
            .borderRadius(16)
            .margin({ top: 8, bottom: 8, left: 12, right: 12 })
          }
        }, (msg: MessageItem) => msg.name + msg.time)
      }
      .width('100%')
      .backgroundColor('#181818')
      .layoutWeight(1)

      // é¢„ç•™åº•éƒ¨å¯¼èˆªæ ç©ºé—´
      Blank().height(56)
    }
    .width('100%')
    .height('100%')
    .backgroundColor('#181818')
  }
} 